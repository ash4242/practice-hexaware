-- CREATE DATABASE
CREATE DATABASE MLP167;

-- USING DATABASE

-- DROP DATABASE MLP167;

USE MLP167;

-- CUSTOMER TABLE CREAION
-- desc customer;

CREATE TABLE CUSTOMER
( 
CUST_ID INTEGER(15) NOT NULL,
CUST_NAME VARCHAR(50) NOT NULL,
CUST_USER_NAME VARCHAR(50) NOT NULL,
CUST_PASSWORD VARCHAR(50) NOT NULL,
CUST_PHONE_NO VARCHAR(20) NOT NULL,
CUST_EMAIL_ID VARCHAR(50) NOT NULL,
CUST_WALLET_BALANCE FLOAT(15,3) ,
CONSTRAINT C_ID_PK PRIMARY KEY(CUST_ID),
CONSTRAINT U_NAME_UQ UNIQUE(CUST_USER_NAME),
CONSTRAINT P_NO_UQ UNIQUE(CUST_PHONE_NO),
CONSTRAINT E_ID_UQ UNIQUE(CUST_EMAIL_ID)
);
 ALTER TABLE customer add DATE_OF_BIRTH DATE;

-- VENDEOR TABLE CREATION

CREATE TABLE VENDOR
(
VEN_ID INTEGER(15) NOT NULL,
VEN_NAME VARCHAR(50) NOT NULL,
VEN_USER_NAME VARCHAR(50) NOT NULL,
VEN_PASSWORD VARCHAR(50) NOT NULL,
VEN_WALLET FLOAT(15,3),
VEN_CONTACT VARCHAR(20)NOT NULL,
VEN_LOCATION VARCHAR(100) NOT NULL,
CONSTRAINT V_ID_PK PRIMARY KEY(VEN_ID),
CONSTRAINT U_NAM_UQ  UNIQUE(VEN_USER_NAME)
);

-- CREATION OF MENU

CREATE TABLE MENU
(
MNU_FOOD_ID INTEGER(15),
MNU_VEN_ID INTEGER(15),
MNU_FOOD_NAME VARCHAR(50),
MNU_CATEGORIES VARCHAR(15),
MNU_SPECIALIZATION VARCHAR(50),
MNU_CALORIES FLOAT(15,3),
MNU_COST FLOAT(15,3),
CONSTRAINT F_ID_PK PRIMARY KEY(MNU_FOOD_ID),
CONSTRAINT V_ID_FK FOREIGN KEY(MNU_VEN_ID) REFERENCES VENDOR(VEN_ID)
);

-- CREATION OF ORDERS

CREATE TABLE ORDERS
(
ORD_ID INTEGER(15) AUTO_INCREMENT,
ORD_CUST_ID INTEGER(15) NOT NULL,
ORD_FOOD_ID INTEGER(15) NOT NULL,
ORD_QUANTITY INTEGER(5) NOT NULL,
ORD_COST FLOAT(15,3) NOT NULL,
ORD_EST_TIME TIME DEFAULT '00:15:00',
ORD_DATE_TIME DATETIME ,
ORD_STATUS VARCHAR(15) NOT NULL,
ORD_REASON VARCHAR(100) ,
CONSTRAINT O_ID_PK PRIMARY KEY(ORD_ID),
CONSTRAINT C_ID_FK FOREIGN KEY(ORD_CUST_ID) REFERENCES CUSTOMER(CUST_ID),
CONSTRAINT F_ID_FK FOREIGN KEY(ORD_FOOD_ID) REFERENCES MENU(MNU_FOOD_ID)
);
